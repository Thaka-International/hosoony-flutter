# ุญุงูุฉ ูุธุงู ุงูุฅุดุนุงุฑุงุช - ุฌุงูุฒูุฉ ุงูุงุฎุชุจุงุฑ

## โ ูุง ูู ุฌุงูุฒ ููุงุฎุชุจุงุฑ ุงูุขู:

### 1. **In-App Notifications (ุงูุฅุดุนุงุฑุงุช ุฏุงุฎู ุงูุชุทุจูู)** โ

**ุงูุญุงูุฉ:** โ **ุฌุงูุฒ ุชูุงูุงู ููุงุฎุชุจุงุฑ**

#### ูุง ูุนูู:
- โ API endpoint: `GET /api/v1/notifications` - ุฌูุจ ุงูุฅุดุนุงุฑุงุช
- โ API endpoint: `PATCH /api/v1/notifications/{id}/read` - ุชุญุฏูุฏ ูููุฑูุก
- โ API endpoint: `POST /api/v1/notifications/test` - ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู (ูููุณุคูููู)
- โ ุตูุญุฉ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ูู Flutter
- โ ุนุฑุถ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
- โ ููุชุฑุฉ ุญุณุจ ุงูููุน (info/success/warning/error/reminder)

#### ููููุฉ ุงูุงุฎุชุจุงุฑ:

**ูู Filament ุฃู Postman:**
```bash
POST https://thakaa.me/api/v1/notifications/test
Headers: Authorization: Bearer {admin_token}
Body: {
  "user_id": 1,
  "type": "info",
  "title": "ุงุฎุชุจุงุฑ ุฅุดุนุงุฑ",
  "message": "ูุฐุง ุฅุดุนุงุฑ ุชุฌุฑูุจู ููุงุฎุชุจุงุฑ",
  "channel": "in_app"
}
```

**ูู ุงูุชุทุจูู:**
1. ุงูุชุญ ุงูุชุทุจูู ูุณุฌู ุงูุฏุฎูู ูุทุงูุจ
2. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช (ุฃููููุฉ ุงูุฌุฑุณ)
3. ูุฌุจ ุฃู ุชุธูุฑ ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ
4. ุงุถุบุท ุนูู ุฅุดุนุงุฑ ูุชุญุฏูุฏู ูููุฑูุก

### 2. **Push Notifications (FCM)** โ๏ธ

**ุงูุญุงูุฉ:** โ๏ธ **ุฌุฒุฆูุงู ุฌุงูุฒ - ูุญุชุงุฌ ุฅุตูุงุญุงุช**

#### ูุง ูุนูู:
- โ Firebase Messaging setup ูู Flutter
- โ ุฌูุจ FCM token ูู ุงูุชุทุจูู
- โ ูุนุงูุฌุฉ ุงูุฅุดุนุงุฑุงุช (foreground & background)
- โ NotificationService ูู Backend ูุน ุฏุนู FCM

#### ูุง ูุญุชุงุฌ ุฅุตูุงุญ:
1. โ **ููุต endpoint ูุชุณุฌูู FCM token**
   - ุงูุชุทุจูู ูุฌูุจ Token ููู ูุง ูุฑุณูู ููู Backend
   - **ุงูุญู:** ุฅุถุงูุฉ `POST /api/v1/devices/register`

2. โ **ุชู ุฅุตูุงุญ Device status check**
   - ูุงู ูุณุชุฎุฏู `status` field ุบูุฑ ููุฌูุฏ
   - **ุชู ุงูุฅุตูุงุญ:** ูุณุชุฎุฏู `isActive()` method ุงูุขู

3. โ๏ธ **FCM_SERVER_KEY configuration**
   - ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูู `.env`
   - **ุงูุชุญูู:** `FCM_SERVER_KEY=your_key_here`

## ๐ ููุฎุต ุงูุฌุงูุฒูุฉ:

| ุงูููุน | ุงูุญุงูุฉ | ุฌุงูุฒ ููุงุฎุชุจุงุฑ | ููุงุญุธุงุช |
|------|--------|---------------|----------|
| **In-App** | โ ูุงูู | โ **ูุนู - ุฌุงูุฒ ุงูุขู** | ูููู ุงุฎุชุจุงุฑู ูุจุงุดุฑุฉ |
| **Push (FCM)** | โ๏ธ ุฌุฒุฆู | โ๏ธ ุจุนุฏ ุฅุถุงูุฉ device registration | ูุญุชุงุฌ endpoint ูุชุณุฌูู device |
| **Email** | โ๏ธ ููุฏ ุฌุงูุฒ | โ ูุญุชุงุฌ SMTP config | TODO: ุชูููู SMTP |
| **SMS** | โ TODO | โ ูุง | TODO: Integration |
| **WhatsApp** | โ TODO | โ ูุง | TODO: Integration |

## ๐งช ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงูููุตู ุจูุง:

### ุงููุฑุญูุฉ 1: ุงุฎุชุจุงุฑ In-App Notifications (ุงูุขู!)

1. **ุฅุฑุณุงู ุฅุดุนุงุฑ ุชุฌุฑูุจู:**
   ```bash
   curl -X POST https://thakaa.me/api/v1/notifications/test \
     -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{
       "user_id": 1,
       "type": "info",
       "title": "ุงุฎุชุจุงุฑ",
       "message": "ูุฐุง ุฅุดุนุงุฑ ุชุฌุฑูุจู",
       "channel": "in_app"
     }'
   ```

2. **ุงูุชุญูู ูู ุงูุชุทุจูู:**
   - ุงูุชุญ ุงูุชุทุจูู
   - ุงูุชูู ุฅูู ุตูุญุฉ ุงูุฅุดุนุงุฑุงุช
   - ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ ุงูุฌุฏูุฏ

3. **ุงุฎุชุจุงุฑ ุชุญุฏูุฏ ูููุฑูุก:**
   - ุงุถุบุท ุนูู ุงูุฅุดุนุงุฑ
   - ูุฌุจ ุฃู ูุชุบูุฑ ุฅูู ุญุงูุฉ "ููุฑูุก"

### ุงููุฑุญูุฉ 2: ุฅููุงู Push Notifications (ุจุนุฏ ุงูุฅุตูุงุญุงุช)

1. ุฅุถุงูุฉ endpoint ูุชุณุฌูู device
2. ุงูุชุฃูุฏ ูู FCM_SERVER_KEY
3. ุงุฎุชุจุงุฑ ุฅุฑุณุงู push notification

## โ ุงูุฎูุงุตุฉ:

**ุงูุฅุดุนุงุฑุงุช ุฏุงุฎู ุงูุชุทุจูู (In-App) ุฌุงูุฒุฉ ุชูุงูุงู ููุงุฎุชุจุงุฑ ูุงูุงุณุชุฎุฏุงู ุงูุขู!**

ููููู:
- โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูููุณุชุฎุฏููู
- โ ุนุฑุถูุง ูู ุงูุชุทุจูู
- โ ุชุญุฏูุฏูุง ูููุฑูุกุฉ
- โ ููุชุฑุชูุง ุญุณุจ ุงูููุน

**Push Notifications ุชุญุชุงุฌ ููุท ุฅุถุงูุฉ endpoint ูุชุณุฌูู device ุซู ุณุชููู ุฌุงูุฒุฉ ุฃูุถุงู!**



